{"ast":null,"code":"import{useEffect,useState}from\"react\";import BackgroundImage from\"./components/BackgroundImage\";import WeatherCard from\"./components/WeatherCard\";import HeaderBar from\"./components/HeaderBar\";import AuthPanel from\"./components/AuthPanel\";import{supabase}from\"./lib/supabaseClient\";import bg from\"./assets/bg.png\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[user,setUser]=useState(null);const[showAuth,setShowAuth]=useState(false);// on mount, check session\nuseEffect(()=>{supabase.auth.getUser().then(res=>{var _res$data;if((_res$data=res.data)!==null&&_res$data!==void 0&&_res$data.user)setUser(res.data.user);});const{data:listener}=supabase.auth.onAuthStateChange((_event,session)=>{setUser((session===null||session===void 0?void 0:session.user)||null);});return()=>{var _listener$subscriptio;return listener===null||listener===void 0?void 0:(_listener$subscriptio=listener.subscription)===null||_listener$subscriptio===void 0?void 0:_listener$subscriptio.unsubscribe();};},[]);const handleLoginClick=()=>setShowAuth(true);const handleLoginSuccess=user=>{setUser(user);setShowAuth(false);};const handleLogout=async()=>{await supabase.auth.signOut();setUser(null);setShowAuth(false);};return/*#__PURE__*/_jsxs(BackgroundImage,{imageUrl:bg,alt:\"cloud\",className:\"w-screen md:h-screen md:min-h-[640px] relative bg-gradient-to-l flex flex-col items-center z-0 opacity-100 font-square\",children:[/*#__PURE__*/_jsx(HeaderBar,{user:user,showAuth:showAuth,onLoginClick:handleLoginClick,onLogout:handleLogout,onCancel:()=>setShowAuth(false)}),showAuth?/*#__PURE__*/_jsx(AuthPanel,{onLoginSuccess:handleLoginSuccess,onCancel:()=>setShowAuth(false)}):/*#__PURE__*/_jsx(WeatherCard,{})]});};export default App;","map":{"version":3,"names":["useEffect","useState","BackgroundImage","WeatherCard","HeaderBar","AuthPanel","supabase","bg","jsx","_jsx","jsxs","_jsxs","App","user","setUser","showAuth","setShowAuth","auth","getUser","then","res","_res$data","data","listener","onAuthStateChange","_event","session","_listener$subscriptio","subscription","unsubscribe","handleLoginClick","handleLoginSuccess","handleLogout","signOut","imageUrl","alt","className","children","onLoginClick","onLogout","onCancel","onLoginSuccess"],"sources":["D:/JR/weather-app/client/src/App.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport BackgroundImage from \"./components/BackgroundImage\";\r\nimport WeatherCard from \"./components/WeatherCard\";\r\nimport HeaderBar from \"./components/HeaderBar\";\r\nimport AuthPanel from \"./components/AuthPanel\";\r\nimport { supabase } from \"./lib/supabaseClient\";\r\nimport bg from \"./assets/bg.png\";\r\n\r\nconst App = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [showAuth, setShowAuth] = useState(false);\r\n\r\n  // on mount, check session\r\n  useEffect(() => {\r\n    supabase.auth.getUser().then((res) => {\r\n      if (res.data?.user) setUser(res.data.user);\r\n    });\r\n\r\n    const { data: listener } = supabase.auth.onAuthStateChange(\r\n      (_event, session) => {\r\n        setUser(session?.user || null);\r\n      }\r\n    );\r\n\r\n    return () => listener?.subscription?.unsubscribe();\r\n  }, []);\r\n\r\n  const handleLoginClick = () => setShowAuth(true);\r\n  const handleLoginSuccess = (user) => {\r\n    setUser(user);\r\n    setShowAuth(false);\r\n  };\r\n  const handleLogout = async () => {\r\n    await supabase.auth.signOut();\r\n    setUser(null);\r\n    setShowAuth(false);\r\n  };\r\n\r\n  return (\r\n    <BackgroundImage\r\n      imageUrl={bg}\r\n      alt=\"cloud\"\r\n      className=\"w-screen md:h-screen md:min-h-[640px] relative bg-gradient-to-l flex flex-col items-center z-0 opacity-100 font-square\"\r\n    >\r\n      <HeaderBar\r\n        user={user}\r\n        showAuth={showAuth}\r\n        onLoginClick={handleLoginClick}\r\n        onLogout={handleLogout}\r\n        onCancel={() => setShowAuth(false)}\r\n      />\r\n\r\n      {showAuth ? (\r\n        <AuthPanel\r\n          onLoginSuccess={handleLoginSuccess}\r\n          onCancel={() => setShowAuth(false)}\r\n        />\r\n      ) : (\r\n        <WeatherCard />\r\n      )}\r\n    </BackgroundImage>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,eAAe,KAAM,8BAA8B,CAC1D,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAClD,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAC9C,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAC9C,OAASC,QAAQ,KAAQ,sBAAsB,CAC/C,MAAO,CAAAC,EAAE,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjC,KAAM,CAAAC,GAAG,CAAGA,CAAA,GAAM,CAChB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACc,QAAQ,CAAEC,WAAW,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAE/C;AACAD,SAAS,CAAC,IAAM,CACdM,QAAQ,CAACW,IAAI,CAACC,OAAO,CAAC,CAAC,CAACC,IAAI,CAAEC,GAAG,EAAK,KAAAC,SAAA,CACpC,IAAAA,SAAA,CAAID,GAAG,CAACE,IAAI,UAAAD,SAAA,WAARA,SAAA,CAAUR,IAAI,CAAEC,OAAO,CAACM,GAAG,CAACE,IAAI,CAACT,IAAI,CAAC,CAC5C,CAAC,CAAC,CAEF,KAAM,CAAES,IAAI,CAAEC,QAAS,CAAC,CAAGjB,QAAQ,CAACW,IAAI,CAACO,iBAAiB,CACxD,CAACC,MAAM,CAAEC,OAAO,GAAK,CACnBZ,OAAO,CAAC,CAAAY,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEb,IAAI,GAAI,IAAI,CAAC,CAChC,CACF,CAAC,CAED,MAAO,SAAAc,qBAAA,OAAM,CAAAJ,QAAQ,SAARA,QAAQ,kBAAAI,qBAAA,CAARJ,QAAQ,CAAEK,YAAY,UAAAD,qBAAA,iBAAtBA,qBAAA,CAAwBE,WAAW,CAAC,CAAC,GACpD,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAMd,WAAW,CAAC,IAAI,CAAC,CAChD,KAAM,CAAAe,kBAAkB,CAAIlB,IAAI,EAAK,CACnCC,OAAO,CAACD,IAAI,CAAC,CACbG,WAAW,CAAC,KAAK,CAAC,CACpB,CAAC,CACD,KAAM,CAAAgB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAA1B,QAAQ,CAACW,IAAI,CAACgB,OAAO,CAAC,CAAC,CAC7BnB,OAAO,CAAC,IAAI,CAAC,CACbE,WAAW,CAAC,KAAK,CAAC,CACpB,CAAC,CAED,mBACEL,KAAA,CAACT,eAAe,EACdgC,QAAQ,CAAE3B,EAAG,CACb4B,GAAG,CAAC,OAAO,CACXC,SAAS,CAAC,wHAAwH,CAAAC,QAAA,eAElI5B,IAAA,CAACL,SAAS,EACRS,IAAI,CAAEA,IAAK,CACXE,QAAQ,CAAEA,QAAS,CACnBuB,YAAY,CAAER,gBAAiB,CAC/BS,QAAQ,CAAEP,YAAa,CACvBQ,QAAQ,CAAEA,CAAA,GAAMxB,WAAW,CAAC,KAAK,CAAE,CACpC,CAAC,CAEDD,QAAQ,cACPN,IAAA,CAACJ,SAAS,EACRoC,cAAc,CAAEV,kBAAmB,CACnCS,QAAQ,CAAEA,CAAA,GAAMxB,WAAW,CAAC,KAAK,CAAE,CACpC,CAAC,cAEFP,IAAA,CAACN,WAAW,GAAE,CACf,EACc,CAAC,CAEtB,CAAC,CAED,cAAe,CAAAS,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}