{"ast":null,"code":"import{useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchBar=_ref=>{let{setSelectedCoordinates}=_ref;const[input,setInput]=useState(\"\");const[cityOptions,setCityOptions]=useState([]);const[selectedCity,setSelectedCity]=useState(null);const fetchCities=async query=>{if(query.length<3)return;// Minimum 3 characters for search\ntry{const response=await axios.get(`/api/geo?q=${query}`);setCityOptions(response.data||[]);}catch(error){console.error(\"Error fetching city options:\",error);}};const handleInputChange=e=>{setInput(e.target.value);fetchCities(e.target.value);// Fetch city options based on input\n};const handleCitySelect=city=>{setSelectedCity(city);setInput(`${city.name}, ${city.state||\"Unknown\"}, ${city.country}`);// Reset input field\nsetCityOptions([]);// Clear city options\n};const handleSearch=e=>{e.preventDefault();// Prevent default form submission\nif(selectedCity){setSelectedCoordinates({lat:selectedCity.lat,lon:selectedCity.lon,name:selectedCity.name// ✅ Keep city name for display purposes\n});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,className:\"flex bg-white rounded-lg shadow-xl h-8 w-full\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:handleInputChange,placeholder:\"Search for a city...\",className:\"w-full h-full ml-2 focus:ring-1 focus:ring-purple focus:shadow-3xl focus:outline-none\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-purple w-1/3 h-full rounded-lg text-white text-s hover:bg-blue\",disabled:!selectedCity,children:\"Search\"})]}),cityOptions.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"absolute bg-white shadow-lg rounded-lg mt-2 w-full z-50\",children:cityOptions.map((city,index)=>/*#__PURE__*/_jsxs(\"li\",{onClick:()=>handleCitySelect(city),className:\"p-2 hover:bg-slate cursor-pointer\",children:[city.name,\", \",city.state||\"Unknown\",\", \",city.country]},index))})]});};export default SearchBar;","map":{"version":3,"names":["useState","axios","jsx","_jsx","jsxs","_jsxs","SearchBar","_ref","setSelectedCoordinates","input","setInput","cityOptions","setCityOptions","selectedCity","setSelectedCity","fetchCities","query","length","response","get","data","error","console","handleInputChange","e","target","value","handleCitySelect","city","name","state","country","handleSearch","preventDefault","lat","lon","className","children","onSubmit","type","onChange","placeholder","disabled","map","index","onClick"],"sources":["D:/JR/weather-app/client/src/components/WeatherCard/components/SearchBar/SearchBar.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst SearchBar = ({ setSelectedCoordinates }) => {\r\n  const [input, setInput] = useState(\"\");\r\n  const [cityOptions, setCityOptions] = useState([]);\r\n  const [selectedCity, setSelectedCity] = useState(null);\r\n\r\n  const fetchCities = async (query) => {\r\n    if (query.length < 3) return; // Minimum 3 characters for search\r\n    try {\r\n      const response = await axios.get(`/api/geo?q=${query}`);\r\n      setCityOptions(response.data || []);\r\n    } catch (error) {\r\n      console.error(\"Error fetching city options:\", error);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setInput(e.target.value);\r\n    fetchCities(e.target.value); // Fetch city options based on input\r\n  };\r\n\r\n  const handleCitySelect = (city) => {\r\n    setSelectedCity(city);\r\n    setInput(`${city.name}, ${city.state || \"Unknown\"}, ${city.country}`); // Reset input field\r\n    setCityOptions([]); // Clear city options\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    e.preventDefault(); // Prevent default form submission\r\n    if (selectedCity) {\r\n      setSelectedCoordinates({\r\n        lat: selectedCity.lat,\r\n        lon: selectedCity.lon,\r\n        name: selectedCity.name, // ✅ Keep city name for display purposes\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <form\r\n        onSubmit={handleSearch}\r\n        className=\"flex bg-white rounded-lg shadow-xl h-8 w-full\"\r\n      >\r\n        <input\r\n          type=\"text\"\r\n          value={input}\r\n          onChange={handleInputChange}\r\n          placeholder=\"Search for a city...\"\r\n          className=\"w-full h-full ml-2 focus:ring-1 focus:ring-purple focus:shadow-3xl focus:outline-none\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-purple w-1/3 h-full rounded-lg text-white text-s hover:bg-blue\"\r\n          disabled={!selectedCity}\r\n        >\r\n          Search\r\n        </button>\r\n      </form>\r\n\r\n      {cityOptions.length > 0 && (\r\n        <ul className=\"absolute bg-white shadow-lg rounded-lg mt-2 w-full z-50\">\r\n          {cityOptions.map((city, index) => (\r\n            <li\r\n              key={index}\r\n              onClick={() => handleCitySelect(city)}\r\n              className=\"p-2 hover:bg-slate cursor-pointer\"\r\n            >\r\n              {city.name}, {city.state || \"Unknown\"}, {city.country}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchBar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}