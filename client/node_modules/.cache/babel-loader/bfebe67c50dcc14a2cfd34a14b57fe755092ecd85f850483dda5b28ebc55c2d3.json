{"ast":null,"code":"import{useState}from\"react\";import{supabase}from\"../../lib/supabaseClient\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AuthPanel=_ref=>{let{onLoginSuccess}=_ref;const[isLogin,setIsLogin]=useState(true);const[form,setForm]=useState({name:\"\",email:\"\",password:\"\",confirmPassword:\"\"});const[loading,setLoading]=useState(false);const[message,setMessage]=useState({type:\"\",content:\"\"});const handleChange=e=>{setForm({...form,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();setMessage({type:\"\",content:\"\"});setLoading(true);const{name,email,password,confirmPassword}=form;// Registration only: validation\nif(!isLogin){if(password!==confirmPassword){setMessage({type:\"error\",content:\"Passwords do not match.\"});setLoading(false);return;}if(password.length<6||!/[a-zA-Z]/.test(password)||!/\\d/.test(password)){setMessage({type:\"error\",content:\"Password must be at least 6 characters and include both letters and numbers.\"});setLoading(false);return;}}let result;if(isLogin){result=await supabase.auth.signInWithPassword({email,password});}else{result=await supabase.auth.signUp({email,password,options:{data:{name},emailRedirectTo:\"https://camillas-weather-app.vercel.app\"}});}if(result.error){setMessage({type:\"error\",content:result.error.message});}else{if(isLogin){onLoginSuccess(result.data.user);}else{setMessage({type:\"success\",content:\"Registration successful! Please log in.\"});setIsLogin(true);setForm({name:\"\",email:\"\",password:\"\",confirmPassword:\"\"});}}setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-sm mx-auto p-6 mt-10 bg-white rounded shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4 text-center\",children:isLogin?\"Login\":\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[!isLogin&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Name\",value:form.name,onChange:handleChange,required:true,className:\"w-full border px-3 py-2 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:form.email,onChange:handleChange,required:true,className:\"w-full border px-3 py-2 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",value:form.password,onChange:handleChange,required:true,className:\"w-full border px-3 py-2 rounded\"}),!isLogin&&/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"confirmPassword\",placeholder:\"Confirm password\",value:form.confirmPassword,onChange:handleChange,required:true,className:\"w-full border px-3 py-2 rounded\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full bg-blue text-white py-2 rounded hover:bg-blue-700\",children:loading?\"Please wait…\":isLogin?\"Login\":\"Register\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-center text-sm text-blue-600 cursor-pointer\",onClick:()=>setIsLogin(!isLogin),children:isLogin?\"Don't have an account? Click to register\":\"Already have an account? Click to login\"}),message.content&&/*#__PURE__*/_jsx(\"p\",{className:`mt-2 text-center text-sm ${message.type===\"error\"?\"text-red-500\":\"text-green-600\"}`,children:message.content})]});};export default AuthPanel;","map":{"version":3,"names":["useState","supabase","jsx","_jsx","jsxs","_jsxs","AuthPanel","_ref","onLoginSuccess","isLogin","setIsLogin","form","setForm","name","email","password","confirmPassword","loading","setLoading","message","setMessage","type","content","handleChange","e","target","value","handleSubmit","preventDefault","length","test","result","auth","signInWithPassword","signUp","options","data","emailRedirectTo","error","user","className","children","onSubmit","placeholder","onChange","required","disabled","onClick"],"sources":["D:/JR/weather-app/client/src/components/AuthPanel/AuthPanel.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { supabase } from \"../../lib/supabaseClient\";\r\n\r\nconst AuthPanel = ({ onLoginSuccess }) => {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    confirmPassword: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState({ type: \"\", content: \"\" });\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setMessage({ type: \"\", content: \"\" });\r\n    setLoading(true);\r\n\r\n    const { name, email, password, confirmPassword } = form;\r\n\r\n    // Registration only: validation\r\n    if (!isLogin) {\r\n      if (password !== confirmPassword) {\r\n        setMessage({\r\n          type: \"error\",\r\n          content: \"Passwords do not match.\",\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      if (\r\n        password.length < 6 ||\r\n        !/[a-zA-Z]/.test(password) ||\r\n        !/\\d/.test(password)\r\n      ) {\r\n        setMessage({\r\n          type: \"error\",\r\n          content:\r\n            \"Password must be at least 6 characters and include both letters and numbers.\",\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n    }\r\n\r\n    let result;\r\n    if (isLogin) {\r\n      result = await supabase.auth.signInWithPassword({ email, password });\r\n    } else {\r\n      result = await supabase.auth.signUp({\r\n        email,\r\n        password,\r\n        options: {\r\n          data: { name },\r\n          emailRedirectTo: \"https://camillas-weather-app.vercel.app\",\r\n        },\r\n      });\r\n    }\r\n\r\n    if (result.error) {\r\n      setMessage({ type: \"error\", content: result.error.message });\r\n    } else {\r\n      if (isLogin) {\r\n        onLoginSuccess(result.data.user);\r\n      } else {\r\n        setMessage({\r\n          type: \"success\",\r\n          content: \"Registration successful! Please log in.\",\r\n        });\r\n        setIsLogin(true);\r\n        setForm({\r\n          name: \"\",\r\n          email: \"\",\r\n          password: \"\",\r\n          confirmPassword: \"\",\r\n        });\r\n      }\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full max-w-sm mx-auto p-6 mt-10 bg-white rounded shadow\">\r\n      <h2 className=\"text-xl font-bold mb-4 text-center\">\r\n        {isLogin ? \"Login\" : \"Register\"}\r\n      </h2>\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        {!isLogin && (\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            placeholder=\"Name\"\r\n            value={form.name}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"w-full border px-3 py-2 rounded\"\r\n          />\r\n        )}\r\n        <input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          value={form.email}\r\n          onChange={handleChange}\r\n          required\r\n          className=\"w-full border px-3 py-2 rounded\"\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Password\"\r\n          value={form.password}\r\n          onChange={handleChange}\r\n          required\r\n          className=\"w-full border px-3 py-2 rounded\"\r\n        />\r\n        {!isLogin && (\r\n          <input\r\n            type=\"password\"\r\n            name=\"confirmPassword\"\r\n            placeholder=\"Confirm password\"\r\n            value={form.confirmPassword}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"w-full border px-3 py-2 rounded\"\r\n          />\r\n        )}\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"w-full bg-blue text-white py-2 rounded hover:bg-blue-700\"\r\n        >\r\n          {loading ? \"Please wait…\" : isLogin ? \"Login\" : \"Register\"}\r\n        </button>\r\n      </form>\r\n\r\n      <p\r\n        className=\"mt-4 text-center text-sm text-blue-600 cursor-pointer\"\r\n        onClick={() => setIsLogin(!isLogin)}\r\n      >\r\n        {isLogin\r\n          ? \"Don't have an account? Click to register\"\r\n          : \"Already have an account? Click to login\"}\r\n      </p>\r\n\r\n      {message.content && (\r\n        <p\r\n          className={`mt-2 text-center text-sm ${\r\n            message.type === \"error\" ? \"text-red-500\" : \"text-green-600\"\r\n          }`}\r\n        >\r\n          {message.content}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}